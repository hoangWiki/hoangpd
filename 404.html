<!DOCTYPE html>
<html>
<body>
    <h1>Thông tin đấu giá</h1>
    <ul id="file-list"></ul>

    <script>
        async function loadFiles() {
			const username = "hoangwiki"
			const repository = "hoangpd"
            const repo = "hoangwiki/hoangpd";  // Your GitHub repo (username/repository)
            const branch = "main";  // Change if using another branch
            
            // Get the folder path dynamically from the URL
            let path = window.location.pathname.split('/').slice(-2, -1)[0]; // Trim leading/trailing slashes
            if (!path) path = "";  // Root folder case

            const apiUrl = `https://api.github.com/repos/${repo}/contents/${path}?ref=${branch}`;

            try {
                const response = await fetch(apiUrl);
                const files = await response.json();

                if (!Array.isArray(files)) {
                    document.body.innerHTML = "<h2>Error: Folder not found.</h2>";
                    return;
                }

                const fileList = document.getElementById("file-list");
                files.forEach(file => {
                    let li = document.createElement("li");
                    let a = document.createElement("a");
                    a.href = `/${path}/${file.name}`;
                    a.textContent = file.name;
                    //a.target = "_blank";
                    li.appendChild(a);
                    fileList.appendChild(li);
                });
            } catch (error) {
                console.error("Error fetching file list:", error);
            }
        }

        loadFiles();
    </script>
</body>
</html>
